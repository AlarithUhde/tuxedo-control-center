<!--
Copyright (c) 2019-2021 TUXEDO Computers GmbH <tux@tuxedocomputers.com>

This file is part of TUXEDO Control Center.

TUXEDO Control Center is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

TUXEDO Control Center is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with TUXEDO Control Center.  If not, see <https://www.gnu.org/licenses/>.
-->

<mat-card class="tcc-card card-support">
    <mat-card-title class="theme-page-title">
        <ng-container i18n>TUXEDO Tomte</ng-container>
    </mat-card-title>
    <hr />

    <div class="content-container centered">
        <p i18n>TUXEDO Tomte is a configuration service that automatically recognizes the customer's device and checks
            for missing drivers or required packages, relieving users of tedious troubleshooting and problem solving.
        </p>
    </div>
</mat-card>


<ng-container *ngIf="tomteIsInstalled === 'false'">

<p il18n> Tomte is not installed </p>
<button mat-raised-button color="primary" (click)="installTomteButton()">Install tomte</button>

</ng-container>

<ng-container *ngIf="tomteMode && tomteIsInstalled === 'true'">


    <mat-card class="tcc-card card-support">
        <mat-card-title class="theme-page-title">
            <ng-container i18n>Selected installation mode</ng-container>
        </mat-card-title>
        <hr />
        <div class="content-container centered">
            <p i18n>Select the mode in which tomte is supposed to operate. Do you want it to handle things
                automatically, or configure it on your own?</p>

            <button mat-raised-button color="primary" [disabled]="tomteMode===tomteModes[0]"
                (click)="tomteModeButton(tomteModes[0])"
                matTooltip="This is the  default  mode.  Everything  will  be  installed/up‐dated/removed automatically by Tomte.">
                <ng-container>Automatic</ng-container>
            </button>
            <button mat-raised-button color="primary" [disabled]="tomteMode===tomteModes[1]"
                (click)="tomteModeButton(tomteModes[1])"
                matTooltip="Only updates will be handled automatically by Tomte. No modules will be installed or removed without user intervention.">
                <ng-container>Updates Only</ng-container>
            </button>
            <button mat-raised-button color="primary" [disabled]="tomteMode===tomteModes[2]"
                (click)="tomteModeButton(tomteModes[2])" matTooltip="Nothing will be configured by Tomte.">
                <ng-container>Disabled</ng-container>
            </button>
        </div>
    </mat-card>

    <mat-card class="tcc-card card-support">
        <mat-card-title class="theme-page-title">
            <ng-container i18n>Tomte Configuration</ng-container>
        </mat-card-title>
        <hr />
        <div class="content-container centered">
            <p i18n>See what packages tomte is handling and block or uninstall them as needed.</p>

            <table class="tomte-list-output-table">
                <tr *ngFor="let line of tomteListArray; first as isFirst">
                    <ng-container *ngIf="isFirst">
                        <th class="tomte-table-padding">{{line[0]}}</th>
                        <th class="tomte-table-padding">{{line[1]}}</th>
                        <th class="tomte-table-padding">{{line[2]}}</th>
                        <th class="tomte-table-padding">{{line[3]}}</th>
                        <th class="tomte-table-padding">{{line[4]}}</th>
                    </ng-container>
                    <ng-container *ngIf="!isFirst">
                        <td class="tomte-table-padding" [matTooltip]="moduleToolTips.get(line[0])">{{line[0]}}</td>
                        <td>{{line[1]}}</td>
                        <td>
                            <ng-container *ngIf="line[2]==='no'">
                                <button class="tomte-yes-button" [disabled]="line[4] === 'prerequisite'"
                                    (click)="tomteInstallButton(line[0],line[2],line[3])"
                                    matTooltip="Install this module">
                                    <ng-container>{{line[2]}}</ng-container>
                                </button>
                            </ng-container>
                            <ng-container *ngIf="line[2]!=='no'">
                                <button class="tomte-no-button" [disabled]="line[4] === 'prerequisite'"
                                    (click)="tomteInstallButton(line[0],line[2],line[3])"
                                    matTooltip="Uninstall this module">
                                    <ng-container>{{line[2]}}</ng-container>
                                </button>
                            </ng-container>

                        </td>
                        <td>
                            <ng-container *ngIf="line[3]==='no'">
                                <button class="tomte-no-button" [disabled]="line[4] === 'prerequisite'"
                                    (click)="tomteBlockButton(line[0],line[3])" matTooltip="Block this module">
                                    <ng-container>{{line[3]}}</ng-container>
                                </button>
                            </ng-container>
                            <ng-container *ngIf="line[3]!=='no'">
                                <button class="tomte-yes-button" [disabled]="line[4] === 'prerequisite'"
                                    (click)="tomteBlockButton(line[0],line[3])" matTooltip="Unblock this module">
                                    <ng-container>{{line[3]}}</ng-container>
                                </button>
                            </ng-container>
                        </td>
                        <td>{{line[4]}}</td>
                    </ng-container>
                </tr>
            </table>

        </div>
    </mat-card>
</ng-container>

<br />
<br />
<br />