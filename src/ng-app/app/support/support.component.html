<!--
Copyright (c) 2019 TUXEDO Computers GmbH <tux@tuxedocomputers.com>

This file is part of TUXEDO Control Center.

TUXEDO Control Center is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

TUXEDO Control Center is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with TUXEDO Control Center.  If not, see <https://www.gnu.org/licenses/>.
-->
<br />
<mat-accordion class="support-accordion">
    <mat-expansion-panel hideToggle [expanded]="true">
        <mat-expansion-panel-header>
            <mat-panel-title i18n="@@cSupportGeneralPanelTitle">TUXEDO Support</mat-panel-title>
            <mat-panel-description>
                <ng-container i18n="@@cSupportGeneralPanelDesc">General support information</ng-container>
                <mat-icon><img src="./assets/images/support.svg"></mat-icon>
            </mat-panel-description>
        </mat-expansion-panel-header>
        <mat-grid-list cols="2" rowHeight="100px">
            <mat-grid-tile>
                <mat-icon><i class="fas fa-phone"></i></mat-icon><h3 style="padding-left: 10px">+49 (0) 821 / 8998 2992</h3>
            </mat-grid-tile>
            <mat-grid-tile>
                <button mat-raised-button color="primary" (click)="openExternalUrl('https://www.tuxedocomputers.com/en/Contact.tuxedo')">
                    <mat-icon>cloud</mat-icon>
                    <strong style="padding-left: 10px" i18n="@@cSupportButtonOnline">TUXEDO Online Support</strong>
                </button>
            </mat-grid-tile>
        </mat-grid-list>
    </mat-expansion-panel>

    <mat-expansion-panel hideToggle (click)="focusControl(frmInputTicketNumber)">
        <mat-expansion-panel-header>
            <mat-panel-title i18n="@@cSupportSysInfoPanelTitle">System info collection</mat-panel-title>
            <mat-panel-description>
                <ng-container i18n="@@cSupportSysInfoPanelDesc">Download and run systeminfos.sh</ng-container>
                <mat-icon><img src="./assets/images/systemoverview.svg"></mat-icon>
            </mat-panel-description>
        </mat-expansion-panel-header>
        <p i18n="@@cSupportSysInfoNoPersonalInfo">The script does not collect any personal data and no access data!</p>
        <p>
            <ng-container i18n="@@cSupportScriptMoreInfo">More information about which data the script collects can be found at</ng-container>
            &nbsp;<button mat-button color="basic" (click)="openExternalUrl('http://systeminfos.sh')">http://systeminfos.sh</button>.
        </p>
        <mat-vertical-stepper [linear]="true">
            <mat-step [stepControl]="formTicketNumber" label="Ticket number">
                <ng-template matStepLabel>
                    <ng-container i18n="@@cSupportStepTicketNumberLabel">Ticket number</ng-container>{{ formTicketNumber.valid ? ': ' : '' }}
                    <strong>{{ formTicketNumber.valid ? frmInputTicketNumber.value : '' }}</strong>
                </ng-template>
                <form [formGroup]="formTicketNumber">
                    <p>
                        <ng-container i18n="@@cSupportTicketNumberFetching">Please enter the ticket number given at support request. If you do not have a ticket
                        number yet please use the online form</ng-container>: <button mat-button color="basic" type="button" (click)="openExternalUrl('https://www.tuxedocomputers.com/en/Contact.tuxedo')">Support</button>
                    </p>
                    <mat-form-field>
                        <input matInput formControlName="inputTicketNumber" #frmInputTicketNumber type="text" i18n-placeholder="@@cSupportTicketNumberInputPlaceholder" placeholder="Ticket number" />
                    </mat-form-field>&nbsp;
                    <button mat-button matStepperNext color="primary" i18n="@@cSupportTicketStepperButtonNext">Next</button>
                </form>
            </mat-step>
            <mat-step i18n-label="@@cSupportStepDownloadAndStartLabel" label="Download and run">
                <p i18n="@@cSupportScriptInfo">
                    When executed the script collects the data and thereafter sends it to our support associated with the ticket number.
                </p>
                <button mat-raised-button color="primary" (click)="buttonStartSysteminfo()" [disabled]="systeminfoRunProgress">
                    <i class="fas fa-cog" [ngClass]="{'fa-spin': systeminfoRunProgress }"></i>&nbsp;
                    <ng-container i18n="@@cSupportSysInfoButtonStart">Start</ng-container>
                </button>
                &nbsp; <strong *ngIf="systeminfoRunOutput !== ''">Status:</strong> {{ systeminfoRunOutput }}
            </mat-step>
        </mat-vertical-stepper>
    </mat-expansion-panel>

    <mat-expansion-panel hideToggle>
        <mat-expansion-panel-header>
            <mat-panel-title i18n="@@cSupportAnydeskPanelTitle">
                Anydesk
            </mat-panel-title>
            <mat-panel-description>
                <ng-container i18n="@@cSupportAnydeskPanelDesc">Install and start Anydesk</ng-container>
                <mat-icon><img src="./assets/images/anydesk-logo-icon.svg"></mat-icon>
            </mat-panel-description>
        </mat-expansion-panel-header>
        <p i18n="@@cSupportAnydeskProgramDesc">
            Anydesk is a remote desktop type tool that can allow support to help you from afar.
        </p>
        <p>
            <button mat-raised-button (click)="buttonInstallRemoveAnydesk()" [disabled]="progress().get(anydeskProgramName) || progressCheck().get(anydeskProgramName)">
                <i class="fas fa-cog" [ngClass]="{'fa-spin': progress().get(anydeskProgramName) || progressCheck().get(anydeskProgramName) }"></i>&nbsp;
                <span *ngIf="!anydeskInstalled && !progressCheck().get(anydeskProgramName)" i18n="@@cSupportAnydeskInstallButton">Install Anydesk</span>
                <span *ngIf="anydeskInstalled && !progressCheck().get(anydeskProgramName)" i18n="@@cSupportAnydeskRemoveButton">Remove Anydesk</span>
                <span *ngIf="progressCheck().get(anydeskProgramName)" i18n="@@cSupportAnydeskProgressButton">Checking</span>
            </button>
            &nbsp;
            <button mat-raised-button color="primary" (click)="buttonStartAnydesk()" *ngIf="anydeskInstalled" i18n="@@cSupportAnydeskStartButton">Start Anydesk</button>
        </p>
    </mat-expansion-panel>
</mat-accordion>
