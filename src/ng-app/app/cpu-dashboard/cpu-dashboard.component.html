<!--
Copyright (c) 2019-2020 TUXEDO Computers GmbH <tux@tuxedocomputers.com>

This file is part of TUXEDO Control Center.

TUXEDO Control Center is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

TUXEDO Control Center is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with TUXEDO Control Center.  If not, see <https://www.gnu.org/licenses/>.
-->
<mat-card class="tcc-card">
    <mat-card-title class="theme-page-title">
        {{ activeProfile.name }} <button mat-button (click)="goToProfileEdit(activeProfile)"><mat-icon><svg viewBox="0 0 512 512"><use href="./assets/images/icon_gear.svg#Icon"></use></svg></mat-icon></button>
    </mat-card-title>
    <mat-divider style="width: 200px; right:0; margin: auto;"></mat-divider>
    <div style="text-align: center;">Derzeit aktives Profil</div>
    <div class="tcc-options-group cpu-thermal-info">
        <div class="title-row">
            <hr />
            <div class="title">
                <mat-icon><svg viewBox="0 0 512 512"><use href="./assets/images/icon_dashboard.svg#Icon"></use></svg></mat-icon>
                <ng-container>System monitor</ng-container>
            </div>
            <hr />
        </div>
            <div class="system-monitor-gauges">
                <div class="dashboard-gauge">
                    <mwl-gauge
                        [max]="120"
                        [min]="0"
                        [value]="fanData.cpu.temp.data.value"
                        [dialStartAngle]="130"
                        [dialEndAngle]="50">
                    </mwl-gauge>
                    <div class="unit-text">&deg;C</div>
                    <svg viewBox="0 0 512 512" class="icon"><use href="./assets/images/icon_temperature.svg#Icon"></use></svg>
                    <div class="legend">
                        <div class="text">CPU - Temp</div>
                    </div>
                </div>
                <div class="dashboard-gauge">
                    <mwl-gauge
                        [max]="cpuInfo.maxFreq"
                        [min]="cpuInfo.minFreq"
                        [value]="avgCpuFreq"
                        [label]="gaugeFreqFormat"
                        [dialStartAngle]="130"
                        [dialEndAngle]="50">
                    </mwl-gauge>
                    <div class="unit-text">GHz</div>
                    <svg viewBox="0 0 512 512" class="icon"><use href="./assets/images/icon_speedometer.svg#Icon"></use></svg>
                    <div class="legend">
                        <div class="text">CPU - Frequency</div>
                    </div>
                </div>
                <div class="dashboard-gauge">
                    <mwl-gauge
                        [max]="100"
                        [min]="0"
                        [value]="fanData.cpu.speed.data.value"
                        [dialStartAngle]="130"
                        [dialEndAngle]="50">
                    </mwl-gauge>
                    <div class="unit-text">%</div>
                    <svg viewBox="0 0 512 512" class="icon"><use href="./assets/images/icon_fan.svg#Icon"></use></svg>
                    <div class="legend">
                        <div class="text">CPU - Fan</div>
                    </div>
                </div>
            </div>
    </div>

    <div class="tcc-options-group cpu-thermal-info">
        <div class="title-row">
            <hr />
            <div class="title">
                <mat-icon><svg viewBox="0 0 512 512"><use href="./assets/images/icon_settings.svg#Icon"></use></svg></mat-icon>
                <ng-container>Profile settings</ng-container>
            </div>
            <hr />
        </div>
        <div style="max-width: 900px; margin:auto; text-align: center;">
            <table border="1" style="max-width:900px;">
                <tr>
                    <td style="width:40%;">
                        <mat-icon><svg viewBox="0 0 512 512"><use href="./assets/images/icon_settings.svg#Icon"></use></svg></mat-icon>
                        <p>test</p>
                    </td>
                    <td style="width: 10%;"></td>
                    <td style="width:40%;"></td>
                </tr>
            </table>  
        </div>
    </div>

    <mat-expansion-panel hideToggle class="cpu-frequency-info">
        <mat-expansion-panel-header>
            <mat-panel-title i18n="@@cCpuDashboardFreqPanelTitle">
                Frequency
            </mat-panel-title>
            <mat-panel-description>
                <ng-container i18n="@@cCpuDashboardFreqPanelTitle">Cpu frequency info</ng-container>
                <mat-icon>flash_on</mat-icon>
            </mat-panel-description>
        </mat-expansion-panel-header>
        <table>
            <tr><th i18n="@@cCpuDashboardFreqDriver">Driver</th><td>{{ activeScalingDrivers.join(',') }}</td></tr>
            <tr><th i18n="@@cCpuDashboardFreqTurbo">Turbo</th><td *ngIf="!pstateInfo.noTurbo" i18n="@@cCpuDashboardFreqTurboOn">on</td><td *ngIf="pstateInfo.noTurbo"><strong i18n="@@cCpuDashboardFreqTurboOff">off</strong></td></tr>
            <tr><th i18n="@@cCpuDashboardFreqCores">Active logical cores</th><td>{{ cpuCoreInfo.length }}&nbsp;<ng-container i18n="@@cCpuDashboardFreqCoresOf">of</ng-container>&nbsp;{{ cpuInfo.availableCores }}</td></tr>
            <tr><th i18n="@@cCpuDashboardFreqFreq">Scaling frequency range</th><td>{{ formatFrequency(cpuCoreInfo[0].scalingMinFreq) }}&nbsp;<ng-container i18n="@@cCpuDashboardFreqFreqTo">to</ng-container>&nbsp;{{ formatFrequency(cpuCoreInfo[0].scalingMaxFreq) }} GHz</td></tr>
            <tr><th i18n="@@cCpuDashboardFreqGovernor">Governor</th><td>{{ cpuCoreInfo[0].scalingGovernor }}</td></tr>
        </table>
    </mat-expansion-panel>

    <div class="tcc-options-group cpu-thermal-info">
        <div class="title-row">
            <hr />
            <div class="title">
                <mat-icon><svg viewBox="0 0 512 512"><use href="./assets/images/icon_dashboard.svg#Icon"></use></svg></mat-icon>
                <ng-container>Other</ng-container>
            </div>
            <hr />
        </div>
        <div class="content">
            <mat-expansion-panel>
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        More
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <mat-chip-list>
                    <mat-chip *ngFor="let core of cpuCoreInfo">
                        <strong>#{{ core.index + 1 }}</strong>:&nbsp;{{ core.scalingCurFreq / 1000000 | number:'1.2-2' }} GHz
                    </mat-chip>
                </mat-chip-list>
            </mat-expansion-panel>
        </div>
    </div>
</mat-card>
<br />
