<!--
Copyright (c) 2019-2020 TUXEDO Computers GmbH <tux@tuxedocomputers.com>

This file is part of TUXEDO Control Center.

TUXEDO Control Center is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

TUXEDO Control Center is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with TUXEDO Control Center.  If not, see <https://www.gnu.org/licenses/>.
-->
<div *ngIf="crpyt_drives.length == 0" i18n="@@nocryptinstall">
    <h3>Wie es aussieht, benutzten sie eien Verschlüsslung für die Laufwerke. Um diese Funktion zu benutzten, installieren sie dieses System mit der Option "Crypt"</h3>
</div>

<div *ngIf="crpyt_drives.length >= 1">
    <form [formGroup]="passwordFormGroup">
        <mat-form-field class="profile-name-input">
            <input matInput #inputFocus="matInput" type="{{buttonType}}" formControlName="cryptPassword" placeholder="Crpyt Password" i18n-placeholder="@@cryptPasswordPlaceholderCryptPassword" minLength="1" maxLength="50" />
    
            <mat-error *ngIf="passwordFormGroup.hasError('required')" i18n="@@cryptPasswordInputCurrentCrypt">
                Please enter your current Crypt password
            </mat-error>
        </mat-form-field>
        <br>
        <mat-form-field class="profile-name-input">
            <input matInput type="{{buttonType}}" placeholder="New Crpyt Password" i18n-placeholder="@@cryptPasswordPlaceholderNewPassword" formControlName="newPassword" minLength="1" maxLength="50" [errorStateMatcher]="matcher" />
    
            <mat-error *ngIf="passwordFormGroup.hasError('required')" i18n="@@cryptPasswordInputNewCrypt">
                Please enter your new Crypt password
            </mat-error>
        </mat-form-field>
        <br>
        <mat-form-field class="profile-name-input">
            <input matInput type="{{buttonType}}" placeholder="Confirm New Crpyt Password" i18n-placeholder="@@cryptPasswordPlaceholderConfirmPassword" formControlName="confirmPassword" minLength="1" maxLength="50" [errorStateMatcher]="matcher" />
            
            <mat-error *ngIf="passwordFormGroup.hasError('notSame')" i18n="@@cryptPasswordNotMatch">
                Passwords do not match
            </mat-error>  
        </mat-form-field>
        <br>
        <div>
            <div i18n="@@listofcryptdevices">List of crypt Drives</div>
            <div *ngFor="let drive of crpyt_drives">
                {{ drive.name }}
            </div>
        </div>
        <br>
        <mat-error *ngIf="errortext_cryptsetup !== ''">
            <h3 i18n="@@cryptErrorAtChanging">Fehler beim ändern des Crypt Passwortes</h3>
            <div>{{ errortext_cryptsetup }}</div>
            <div>{{ errortext_cryptsetup_detail }}</div>
        </mat-error>
        <br>
    </form>

    <div *ngIf="work_process">
        <mat-spinner color="accent" style="margin:0 auto;"></mat-spinner>
    </div>
    
    <button mat-stroked-button color="primary" (click)="changePassword()" i18n="@@cryptButtonSave" [disabled]="!this.passwordFormGroup.valid">Save</button>
    <button mat-stroked-button color="basic" (click)="showPassword()">{{show_password_button_text}}</button>
</div>