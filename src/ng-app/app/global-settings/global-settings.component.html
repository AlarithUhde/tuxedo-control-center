<!--
Copyright (c) 2019-2020 TUXEDO Computers GmbH <tux@tuxedocomputers.com>

This file is part of TUXEDO Control Center.

TUXEDO Control Center is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

TUXEDO Control Center is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with TUXEDO Control Center.  If not, see <https://www.gnu.org/licenses/>.
-->

<div class="content">
    <mat-grid-list [cols]="gridParams.cols" rowHeight="3em" class="global-settings-grid">
        <mat-grid-tile [colspan]="gridParams.headerSpan"><header i18n="@@cGlobalSettingsCPUSettingsLabel">CPU Settings</header></mat-grid-tile>
        <mat-grid-tile [colspan]="gridParams.valueSpan">
            <content class="value">
                <span [hidden]="!inputCPUSettings.checked" i18n="@@cGlobalSettingsCPUSettingsActivated">activated</span>
                <span [hidden]="inputCPUSettings.checked" i18n="@@cGlobalSettingsCPUSettingsDeactivated">deactivated</span>
            </content>
        </mat-grid-tile>
        <mat-grid-tile [colspan]="gridParams.inputSpan">
            <content class="input">
                <mat-checkbox #inputCPUSettings
                    color="primary"
                    [(ngModel)]="cpuSettingsEnabled"
                    (change)="onCPUSettingsEnabledChanged($event)">
                </mat-checkbox>
            </content>
        </mat-grid-tile>
    </mat-grid-list>
    <div class=margin-bottom i18n>On deactivate, CPU settings are <strong>not</strong> reset to default. Default settings need to be restored by hand or a system reboot.</div>
    
    <mat-grid-list [cols]="gridParams.cols" rowHeight="3em" class="global-settings-grid">
        <mat-grid-tile [colspan]="gridParams.headerSpan"><header i18n="@@cGlobalSettingsFanControlLabel">Fan Control</header></mat-grid-tile>
        <mat-grid-tile [colspan]="gridParams.valueSpan">
            <content class="value">
                <span [hidden]="!inputFanControl.checked" i18n="@@cGlobalSettingsFanControlActivated">activated</span>
                <span [hidden]="inputFanControl.checked" i18n="@@cGlobalSettingsFanControlDeactivated">deactivated</span>
            </content>
        </mat-grid-tile>
        <mat-grid-tile [colspan]="gridParams.inputSpan">
            <content class="input">
                <mat-checkbox #inputFanControl
                    color="primary"
                    [(ngModel)]="fanControlEnabled"
                    (change)="onFanControlEnabledChanged($event)">
                </mat-checkbox>
            </content>
        </mat-grid-tile>
    </mat-grid-list>
    <div i18n>On deactivate, the default automatic fan control is restored directly.</div>
    
    <header class=margin-top i18n="@@cGlobalSettingsYCbCr420WorkaroundHeader">Force Chroma Subsampling (Y'CbCr 4:2:0) if available:</header>
    <ng-template ngFor let-card [ngForOf]="ycbcr420Workaround" let-i="index"> <!--Long form of ngFor, because short form can't be used without adding a HTML element-->
        <mat-grid-list *ngFor="let port of Object.keys(card)" [cols]="gridParams.cols" rowHeight="3em" class="global-settings-grid">
            <mat-grid-tile class=margin-left [colspan]="gridParams.headerSpan"><header i18n="@@cGlobalSettingsYCbCr420WorkaroundLabel">Port {{port}} of Card {{i}}</header></mat-grid-tile>
            <mat-grid-tile [colspan]="gridParams.valueSpan">
                <content class="value">
                    <span [hidden]="!inputYCbCr420Workaround.checked" i18n="@@cGlobalSettingsYCbCr420WorkaroundActivated">activated</span>
                    <span [hidden]="inputYCbCr420Workaround.checked" i18n="@@cGlobalSettingsYCbCr420WorkaroundDeactivated">deactivated</span>
                </content>
            </mat-grid-tile>
            <mat-grid-tile [colspan]="gridParams.inputSpan">
                <content class="input">
                    <mat-checkbox #inputYCbCr420Workaround
                        color="primary"
                        [(ngModel)]="ycbcr420Workaround[i][port]"
                        (change)="onYCbCr420WorkaroundChanged($event, i, port)">
                    </mat-checkbox>
                </content>
            </mat-grid-tile>
        </mat-grid-list>
    </ng-template>
    <div i18n="@@cGlobalSettingsYCbCr420WorkaroundExplanation1">This setting might fix flickering on 4k@60Hz with certain HDMI cables. It does so by using a lossy compression to reduce the datarate over the cable.</div>
    <div i18n="@@cGlobalSettingsYCbCr420WorkaroundExplanation2">To ensure that the setting gets applied you need to unplug and replug the monitor or restart your computer.</div>
    <div i18n="@@cGlobalSettingsYCbCr420WorkaroundExplanation3">On some devices the HDMI ports are also named DisplayPort or DP internally and are therefore listed as such here.</div>
</div>
