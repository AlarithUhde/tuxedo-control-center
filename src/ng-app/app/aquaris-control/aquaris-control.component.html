<mat-card class="tcc-card aquaris-control">
    <mat-card-title class="theme-page-title">
        <ng-container>Aquaris control</ng-container>
    </mat-card-title>

    <button mat-raised-button color="basic" (click)="buttonConnect()" [disabled]="isConnected || isConnecting">
        <strong>Connect <i class="fas fa-cog" [ngClass]="{'fa-spin': isConnecting }"></i></strong>
    </button>
    <button mat-raised-button color="basic" (click)="buttonDisconnect()" [disabled]="!isConnected || isDisconnecting">
        <strong>Disconnect</strong>
    </button>
    Connected: {{ isConnected ? 'yes' : 'no' }} {{ fwVersion }}

    <div class="categories" *ngIf="isConnected">

        <!-- Fan control -->
        <div class="category">
            <span>Fan (<button mat-button (click)="buttonFanStop()">Stop</button>)</span>
            <div>
                <span class="label">{{ fanSpeed.value }} %</span>
                <mat-slider #fanSpeed [formControl]="ctrlFanDutyCycle"
                    min="0"
                    max="100"
                    step="1"
                    color="primary"
                    (change)="sliderFanInput(fanSpeed.value)">
                </mat-slider>
            </div>
        </div>

        <!-- Pump control -->
        <div class="category">
            <span>Pump (<button mat-button (click)="buttonPumpStop()">Stop</button>)</span>
            <mat-slider #pumpDutyCycle [formControl]="ctrlPumpDutyCycle"
                min="0"
                max="100"
                step="1"
                color="primary"
                (change)="pumpInput(pumpDutyCycle.value, pumpVoltage.value)">
            </mat-slider>
            <div>
                <mat-button-toggle-group #pumpVoltage [formControl]="ctrlPumpVoltage" (change)="pumpInput(pumpDutyCycle.value, pumpVoltage.value)">
                    <mat-button-toggle [value]="2">7V</mat-button-toggle>
                    <mat-button-toggle [value]="3">8V</mat-button-toggle>
                    <mat-button-toggle [value]="0">11V</mat-button-toggle>
                    <mat-button-toggle [value]="1">12V</mat-button-toggle>
                </mat-button-toggle-group>
            </div>
        </div>

    </div>

    <div class="categories" *ngIf="isConnected">

        <!-- LED Control-->
        <div class="category">
            <span>LED (<button mat-button (click)="buttonLedStop()">Stop</button>)</span>
            <div>
                <span class="label">Red {{ colorRed.value }}</span>
                <mat-slider #colorRed [formControl]="ctrlLedRed"
                    min="0"
                    max="255"
                    step="1"
                    color="primary"
                    (input)="ledInput(colorRed.value, colorGreen.value, colorBlue.value)">
                </mat-slider>
            </div>
            <div>
                <span class="label">Green {{ colorGreen.value }}</span>
                <mat-slider #colorGreen [formControl]="ctrlLedGreen"
                    min="0"
                    max="255"
                    step="1"
                    color="primary"
                    (input)="ledInput(colorRed.value, colorGreen.value, colorBlue.value)">
                </mat-slider>
            </div>
            <div>
                <span class="label">Blue {{ colorBlue.value }}</span>
                <mat-slider #colorBlue [formControl]="ctrlLedBlue"
                    min="0"
                    max="255"
                    step="1"
                    color="primary"
                    (input)="ledInput(colorRed.value, colorGreen.value, colorBlue.value)">
                </mat-slider>
            </div>
            <div>
                <mat-button-toggle-group #ledMode [formControl]="ctrlLedMode" (change)="ledInput(colorRed.value, colorGreen.value, colorBlue.value)">
                    <mat-button-toggle [value]="0">Static</mat-button-toggle>
                    <mat-button-toggle [value]="1">Breathe</mat-button-toggle>
                    <mat-button-toggle [value]="2">"Colorful"</mat-button-toggle>
                    <mat-button-toggle [value]="3">Breathingcolors :)</mat-button-toggle>
                </mat-button-toggle-group>
            </div>
        </div>

    </div>

</mat-card>